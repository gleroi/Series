var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports"],function(n,t){(function(n){var f=function(){function n(n,t,i){this.title=ko.observable(),this.opus=ko.observable(),this.season=ko.observable(),this.title(n),this.season(t),this.opus(i)}return n}(),t,i,r,u;n.Episode=f,t=function(){function n(n,t,i){this.id=ko.observable(),this.name=ko.observable(),this.description=ko.observable(),this.episodes=ko.observableArray(),this.id(n),this.name(t),i!=null&&this.description(i)}return n}(),n.Serie=t,i=function(){function n(n){this.url=n.lastIndexOf("/")<=n.length?n+"/":n}return n}(),r=function(n){function i(){n.call(this,"/api/series/search/")}return __extends(i,n),i.prototype.search=function(n){var i=this.url+n;return $.getJSON(i).then(function(n){return ko.utils.arrayMap(n.Series,function(n){return new t(n.Id,n.Title,n.Description)})}).fail(function(n){console.error(i,n)})},i}(i),n.SearchService=r,u=function(n){function i(){n.call(this,"/api/series/library/")}return __extends(i,n),i.prototype.transformResponse=function(n){return ko.utils.arrayMap(n.Series,function(n){return new t(n.Id,n.Title,n.Description)})},i.prototype.get=function(){return $.getJSON(this.url).then(function(n){return console.log(n),this.transformResponse(n)}).fail(function(n){console.error(n)})},i.prototype.add=function(n){return $.post(this.url,{data:{SeriesToAdd:[n]}}).then(function(n){return console.log(n),this.transformResponse(n)}).fail(function(n){console.error(n)})},i}(i),n.LibraryService=u})(t.Series||(t.Series={}))})