var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports"],function(n,t){(function(n){var i=function(){function n(){this.id=ko.observable(),this.title=ko.observable(),this.url=ko.observable()}return n}(),t,r,u,f,e;n.SerieLink=i,t=function(){function n(n){this.url=n.lastIndexOf("/")<n.length-1?n+"/":n}return n.prototype.transformResponse=function(n){return ko.utils.arrayMap(n.Series,function(n){var t=new i;return t.id(n.Id),t.title(n.Title),t.url(n.Url),t})},n}(),n.Service=t,r=function(n){function t(){n.call(this,"/api/search/")}return __extends(t,n),t.prototype.search=function(n){var i=this,t=this.url;return $.getJSON(t,{term:n}).then(function(n){return i.transformResponse(n)}).fail(function(n){console.error(t,n)})},t}(t),n.SearchService=r,u=function(n){function t(){n.call(this,"/api/library/")}return __extends(t,n),t.prototype.get=function(){var n=this;return $.getJSON(this.url).then(function(t){return console.log(t),n.transformResponse(t)}).fail(function(n){console.error(n)})},t.prototype.add=function(n){var t=this;return console.log(n),$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:this.url,data:JSON.stringify({Series:[n]})}).then(function(n){return console.log(n),t.transformResponse(n)}).fail(function(n){console.error(n)})},t}(t),n.LibraryService=u,f=function(n){function t(){n.call(this,"/api/torrents/")}return __extends(t,n),t.prototype.get=function(n){var t=this.url;return $.getJSON(t,{serieId:n}).then(function(n){return n}).fail(function(n){console.error(t,n)})},t.prototype.update=function(n){var t={Id:n.Id,Status:n.Status};return console.log("update (service)",t),$.ajax({type:"PUT",dataType:"json",contentType:"application/json",url:this.url,data:JSON.stringify(t)}).fail(function(n){console.error(n)})},t}(t),n.TorrentService=f,e=function(n){function t(){n.call(this,"/api/latest/")}return __extends(t,n),t.prototype.get=function(){return $.getJSON(this.url).fail(function(n){console.error("latest.get",n)})},t}(t),n.LatestService=e})(t.Series||(t.Series={}));var i=t.Series})