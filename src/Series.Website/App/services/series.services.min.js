var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i};define(["require","exports"],function(n,t){(function(n){var f=function(){function n(n,t,i){this.title=ko.observable(),this.opus=ko.observable(),this.season=ko.observable(),this.title(n),this.season(t),this.opus(i)}return n}(),t,i,r,u;n.Episode=f,t=function(){function n(n,t,i){this.id=ko.observable(),this.title=ko.observable(),this.description=ko.observable(),this.episodes=ko.observableArray(),this.id(n),this.title(t),i!=null&&this.description(i)}return n}(),n.Serie=t,i=function(){function n(n){this.url=n.lastIndexOf("/")<n.length-1?n+"/":n}return n}(),r=function(n){function i(){n.call(this,"/api/search/")}return __extends(i,n),i.prototype.search=function(n){var i=this.url;return $.getJSON(i,{term:n}).then(function(n){return ko.utils.arrayMap(n.Series,function(n){return new t(n.Id,n.Title,n.Description)})}).fail(function(n){console.error(i,n)})},i}(i),n.SearchService=r,u=function(n){function i(){n.call(this,"/api/library/")}return __extends(i,n),i.prototype.transformResponse=function(n){return ko.utils.arrayMap(n.Series,function(n){return new t(n.Id,n.Title,n.Description)})},i.prototype.get=function(){var n=this;return $.getJSON(this.url).then(function(t){return console.log(t),n.transformResponse(t)}).fail(function(n){console.error(n)})},i.prototype.add=function(n){var t=this;return console.log(n),$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:this.url,data:JSON.stringify({LibraryId:12,Series:[n]})}).then(function(n){return console.log(n),t.transformResponse(n)}).fail(function(n){console.error(n)})},i}(i),n.LibraryService=u})(t.Series||(t.Series={}))})