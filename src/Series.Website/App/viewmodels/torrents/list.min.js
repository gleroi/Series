define(["require","exports","services/series.services"],function(n,t,i){var r=i;(function(n){function u(t){var i=ko.mapping.toJS(t);console.log("updateTorrent (vm):",i),n.torrentsService.update(i)}function f(){n.torrentsService.get().then(function(i){var r=ko.utils.arrayMap(i.Series,function(n){return new t(n)});n.series(r)}).fail(function(n){console.error(n)})}function e(){f()}n.displayName="Torrents",n.series=ko.observableArray(),n.torrentsService=new r.Series.TorrentService;var t=function(){function n(n){this.Id=ko.observable(),this.Title=ko.observable(),this.Torrents=ko.observableArray(),this.Ignore=ko.observable(),this.Visible=ko.observable(!1),ko.mapping.fromJS(n,{Torrents:{create:function(n){return new i(n.data)}}},this),this.Ignore(!1)}return n.prototype.toggleVisible=function(){var n=this,t=n.Visible();n.Visible(!t)},n}(),i=function(){function n(n){var t=this;this.Id=ko.observable(),this.Filename=ko.observable(),this.Status=ko.observable(),ko.mapping.fromJS(n,null,this),this.Ignore=ko.computed({read:function(){return t.Status()==0},write:function(){t.Status(t.Status()==0?1:0),u(t)}})}return n}();e()})(t.Torrents||(t.Torrents={}))})